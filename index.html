<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>迷失森林中的小屋測驗</title>
    <style>
        :root {
            --dark-gray: #333333;
            --medium-gray: #4b4948;
            --light-gray: #f5f5f5;
            --white: #ffffff;
            --orange: #f6ad48;
            --dark-orange: #f49717;
        }

        body {
            font-family: '微軟正黑體', 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: var(--dark-gray);
            color: var(--white);
            padding: 20px;
            box-sizing: border-box;
        }

        #app-container {
            width: 90%;
            max-width: 700px;
            background-color: var(--medium-gray);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            position: relative;
            animation: fadeIn 1.5s ease-in-out;
        }

        .page {
            padding: 40px;
            text-align: center;
            display: none;
            transition: opacity 0.8s ease-in-out;
        }

        .page.active {
            display: block;
            opacity: 1;
        }

        .page.fading-out {
            opacity: 0;
        }

        /* Start Page Styling */
        #start-page h1 {
            color: var(--orange);
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        #start-page p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .start-btn {
            background-color: var(--orange);
            color: var(--white);
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 30px;
        }

        .start-btn:hover {
            background-color: var(--dark-orange);
            transform: translateY(-2px);
        }

        /* Question Page Styling */
        #question-page .question-text {
            font-size: 1.4em;
            line-height: 1.8;
            margin-bottom: 30px;
            color: var(--white);
        }

        #question-page .story-narrative {
            font-style: italic;
            color: var(--light-gray);
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .option-btn {
            background-color: #5c5c5c;
            color: var(--white);
            padding: 20px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            text-align: left;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .option-btn:hover {
            background-color: #707070;
            transform: translateY(-3px);
        }

        .option-btn.selected {
            background-color: var(--orange);
            box-shadow: 0 0 15px rgba(255, 107, 0, 0.7);
            transform: scale(1.02);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .nav-btn {
            background-color: var(--orange);
            color: var(--white);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .nav-btn:disabled {
            background-color: #777;
            cursor: not-allowed;
        }

        .nav-btn:hover:not(:disabled) {
            background-color: var(--dark-orange);
        }

        /* Result Page Styling */
        #result-page h2 {
            color: var(--orange);
            font-size: 2em;
            margin-bottom: 15px;
        }

        #result-page p {
            font-size: 1.1em;
            line-height: 1.7;
            text-align: left;
            margin-bottom: 20px;
        }
        
        #result-page .result-analysis {
            background-color: #2c2c2c;
            padding: 25px;
            border-radius: 10px;
        }

        .contact-btn {
            background-color: var(--orange);
            color: var(--white);
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 30px;
            text-decoration: none;
            display: inline-block;
        }

        .contact-btn:hover {
            background-color: var(--dark-orange);
            transform: translateY(-2px);
        }

        /* Promotion Page Styling */
        #promotion-page h2 {
            color: var(--orange);
            font-size: 2em;
            margin-bottom: 20px;
        }

        #promotion-page p {
            font-size: 1.1em;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        #promotion-page .restart-btn {
            background-color: #5c5c5c;
            color: var(--white);
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 20px;
        }

        #promotion-page .restart-btn:hover {
            background-color: #707070;
            transform: translateY(-2px);
        }

        /* Progress Bar */
        .progress-bar-container {
            width: 100%;
            height: 10px;
            background-color: #5c5c5c;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--orange);
            border-radius: 5px;
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="app-container">
        <div id="start-page" class="page active">
            <h1>迷失森林中的小屋</h1>
            <p>你隻身在濃霧瀰漫的森林中迷了路。夜色將至，你偶然發現一間隱蔽在樹林深處的廢棄小屋。推開大門，迎接你的將是…一場由你親手打造的冒險。</p>
            <button class="start-btn" onclick="startQuiz()">進入小屋</button>
        </div>

        <div id="question-page" class="page">
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <p class="story-narrative"></p>
            <h2 class="question-text"></h2>
            <div class="options-container"></div>
            <div class="navigation-buttons">
                <button class="nav-btn" id="prevBtn" onclick="goBack()" disabled>上一題</button>
            </div>
        </div>

        <div id="result-page" class="page">
            <h2 id="result-title"></h2>
            <div class="result-analysis">
                <p id="result-analysis"></p>
                <p id="personality-analysis"></p>
            </div>
            <button class="contact-btn" onclick="showPromotionPage()">開始你的夢想小屋</button>
        </div>

        <div id="promotion-page" class="page">
            <h2>打造專屬於你的夢想小屋</h2>
            <p>測驗結束了，但你的夢想才正要啟程。如果你最近有任何關於理想家居的想法，無論是風格規劃還是裝潢諮詢，我們都非常樂意與你一同實現。點擊下方按鈕，讓你的夢想不再只是測驗結果，而是真實的生活風景。</p>
            <a href="https://www.instagram.com/kungshin.design?igsh=M2VjdHFkZHdjdnh2&utm_source=qr" class="contact-btn">與我們聯繫</a>
            <button class="restart-btn" onclick="restartQuiz()">重新測驗</button>
        </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let userAnswers = [];
        const appContainer = document.getElementById('app-container');
        const startPage = document.getElementById('start-page');
        const questionPage = document.getElementById('question-page');
        const resultPage = document.getElementById('result-page');
        const promotionPage = document.getElementById('promotion-page');
        const questionText = document.querySelector('#question-page .question-text');
        const storyNarrative = document.querySelector('#question-page .story-narrative');
        const optionsContainer = document.querySelector('.options-container');
        const resultTitle = document.getElementById('result-title');
        const resultAnalysis = document.getElementById('result-analysis');
        const personalityAnalysis = document.getElementById('personality-analysis');
        const progressBar = document.getElementById('progressBar');
        const prevBtn = document.getElementById('prevBtn');

        // Questions with a story narrative prefix
        const questions = [
            {
                id: 1,
                text: "你推開那扇吱呀作響的木門，一股氣味撲面而來，你的第一反應是？",
                narrative: "第一步，你踏進了這座廢棄小屋...",
                options: {
                    A: "是泥土與新芽的清新，陽光穿過木質窗櫺，灑落一地金黃。",
                    B: "是舊書與塵埃的歷史感，窗外風聲呼嘯，彷彿在低語著過往。",
                    C: "是無盡的靜謐與純粹，空氣中沒有任何雜味，只有一種空靈的純淨。",
                    D: "是雨後潮濕的泥土氣息，混合著一股未知的新鮮感，引誘你繼續探索。"
                }
            },
            {
                id: 2,
                text: "你循著氣味走進中央，一個角落的微光吸引了你。那道光來自於？",
                narrative: "你繼續深入小屋，好奇心驅使你走向一個發光的角落...",
                options: {
                    A: "一盞老舊的煤油燈，在牆角靜靜地燃燒著，散發出溫暖的光。",
                    B: "幾盞金屬外殼的燈具，它們的線路裸露在外，卻充滿未來的設計感。",
                    C: "一扇天窗，月光或星光直接灑落，照亮了地板上的一塵不染。",
                    D: "一個發光的發電機，它輕輕地嗡嗡作響，為整個空間帶來了生命的跡象。"
                }
            },
            {
                id: 3,
                text: "你發現了小屋裡的一張桌子，上面擺放著一組奇特的工具。你會如何處理它們？",
                narrative: "在微光的指引下，你找到一張桌子，上面擺放著工具...",
                options: {
                    A: "仔細地擦拭每一件工具，為它們找到合適的收納位置。",
                    B: "將所有工具重新排列，按照你的喜好混搭，創造出獨一無二的組合。",
                    C: "只留下最基本、最重要的幾樣，將多餘的全部扔掉，保持桌面的淨空。",
                    D: "開始拆解它們，研究它們的構造和原理，看看是否能組裝出新的東西。"
                }
            },
            {
                id: 4,
                text: "當你望向窗外時，你的目光被遠處的一片森林景色所吸引，你看到的是？",
                narrative: "你抬頭望向窗外，窗外的景色將給你帶來靈感...",
                options: {
                    A: "茂密的樹林和潺潺的溪流，自然景觀充滿生機，讓你感到平靜與安寧。",
                    B: "遠處有一座冒著煙的小鎮，讓你興奮地想去探索那裡的人文風情。",
                    C: "一望無際的雪景，一切都被純白覆蓋，你感到一種超脫世俗的寧靜。",
                    D: "一座巨大的工廠廢墟，讓你對這個地方的歷史產生了無限的聯想與好奇。"
                }
            },
            {
                id: 5,
                text: "你決定裝修小屋的牆壁，你會選擇哪種材料來覆蓋？",
                narrative: "現在，你決定賦予這座小屋全新的面貌...",
                options: {
                    A: "用溫暖的木板覆蓋，讓整個空間充滿森林的氣息。",
                    B: "用色彩鮮豔的織物和掛毯裝飾，創造出自由奔放的氛圍。",
                    C: "維持原本的白牆，只用最簡單的線條勾勒，強調空間的純粹。",
                    D: "保留原始的紅磚或水泥牆面，讓粗獷的紋理成為一種風格。"
                }
            },
            {
                id: 6,
                text: "當你餓了，你會選擇如何準備晚餐？",
                narrative: "肚子餓了，你該如何利用小屋裡的資源準備一頓晚餐？",
                options: {
                    A: "在壁爐邊燃起溫暖的火，用簡單的食材煮一鍋湯。",
                    B: "拿出你隨身攜帶的香料，創造出充滿異國風味的料理。",
                    C: "只吃最簡單、最原始的食物，享受食物本身的純粹味道。",
                    D: "用工具組合出一個簡易的烤爐，嘗試烤肉或烘焙。"
                }
            },
            {
                id: 7,
                text: "小屋裡有一面空白的牆，你決定用來展示你的收藏。你會展示什麼？",
                narrative: "在你的巧手下，小屋逐漸有了你的味道。你發現了一面空白的牆...",
                options: {
                    A: "撿來的乾燥花和樹枝，將大自然的美景搬進室內。",
                    B: "從各地旅行帶回來的紀念品，讓牆面充滿故事感。",
                    C: "只有一面掛著一件藝術品的牆，留白成為另一種表達。",
                    D: "各種機械零件和工具，將它們解構後重新組合成一件雕塑。"
                }
            },
            {
                id: 8,
                text: "夜深了，你決定如何點亮小屋？",
                narrative: "夜幕降臨，你該如何讓這個空間充滿溫暖與光明？",
                options: {
                    A: "溫馨的黃色燈光，讓整個空間充滿安全感。",
                    B: "不同顏色的彩燈和燈串，讓小屋充滿節慶般的熱鬧氣氛。",
                    C: "只點燃一盞小燈，讓大部分空間沉浸在寧靜的黑暗中。",
                    D: "用金屬燈罩和裸露的燈泡，創造出粗獷且獨特的工業光線。"
                }
            },
            {
                id: 9,
                text: "你為小屋打造了一個小小的戶外空間，那裡是什麼樣子？",
                narrative: "你打開後門，發現一個可以改造的小小戶外空間...",
                options: {
                    A: "一個種滿了香草和蔬菜的小菜園，充滿了生命力。",
                    B: "一個掛滿了手工編織吊床和彩色燈飾的休憩區，充滿了自由與放鬆。",
                    C: "一張木製長椅和一個小茶几，簡單而舒適，能獨自靜靜地欣賞風景。",
                    D: "一個用舊木棧板和鋼筋搭建的戶外廚房，充滿了DIY的樂趣。"
                }
            },
            {
                id: 10,
                text: "清晨，當你準備離開小屋時，你回頭望了最後一眼，你覺得這座小屋現在是…？",
                narrative: "清晨，你帶著滿載而歸的心情準備離開...",
                options: {
                    A: "一個充滿陽光和溫暖的庇護所，是你與大自然連結的秘密基地。",
                    B: "一個色彩斑斕、充滿故事的家，每一次探索都像一場新的冒險。",
                    C: "一個純淨而簡潔的空間，讓你找到了內心的平靜與秩序。",
                    D: "一個充滿創造力與無限可能性的工坊，每一個角落都充滿驚喜。"
                }
            },
        ];

        const results = {
            A: {
                title: "你是北歐風（Scandinavian）小屋的主人",
                analysis: "你的選擇顯示你偏好溫暖、自然、簡約的生活方式，你的小屋將是一個充滿陽光、木質和舒適感的庇護所。",
                personality: "你的個性溫和而務實，注重細節，享受生活中的小確幸。你樂於與自然和諧共處，總能在大地中找到心靈的慰藉。"
            },
            B: {
                title: "你是波希米亞風（Boho）小屋的主人",
                analysis: "你的選擇顯示你充滿自由與冒險精神，你的小屋將是一個充滿繽紛色彩、來自各地的故事和無拘無束的夢想之地。",
                personality: "你是一個熱愛自由、充滿創意和冒險精神的旅人。你從不害怕嘗試新事物，你的生命就是一場沒有終點的探索，而你的家就是你所有故事的集合。"
            },
            C: {
                title: "你是極簡風（Minimalist）小屋的主人",
                analysis: "你的選擇顯示你追求純粹與秩序，你的小屋將沒有多餘的裝飾，每一個物件都有其存在的必要，為你提供了心靈的喘息空間。",
                personality: "你是一個追求純粹與秩序的思考者，相信「少即是多」的哲學。你內心堅定，不隨波逐流，總能在混亂中找到屬於自己的寧靜與平衡。"
            },
            D: {
                title: "你是工業風（Industrial）小屋的主人",
                analysis: "你的選擇顯示你喜愛原始、粗獷的質感，你的小屋將充滿裸露的磚牆、金屬和舊機械，是一個充滿創造力與無限可能性的工坊。",
                personality: "你是一個充滿好奇心與創造力的實踐家。你喜歡動手，享受從無到有的過程。你樂於挑戰既定的規則，並從舊事物中發掘新的價值，你的生活就是一場永不止息的創造。"
            },
            A_C: {
                title: "你是有機現代風（Organic Modern）小屋的主人",
                analysis: "你的小屋融合了北歐的溫暖與極簡的純粹，以自然素材與乾淨線條為主，創造出一個平衡舒適與秩序的家，充滿平靜與生命力。",
                personality: "你是一個務實而理性的夢想家，追求生活的品質，但又不失對簡約的崇尚。你善於平衡內心的需求與外在的環境，創造出和諧的生活。"
            },
            D_A: {
                title: "你是現代農舍（Modern Farmhouse）小屋的主人",
                analysis: "你的小屋結合了工業風的原始與北歐風的溫暖，金屬與木質完美融合。這裡既有粗獷的質感，又不失家的溫馨，是一個充滿個性與舒適的空間。",
                personality: "你是一個既有創造力又有溫度的實踐者。你喜歡親自動手，享受改造的樂趣，同時也懂得營造溫馨的氛圍，讓每一個角落都充滿故事。"
            },
            D_C: {
                title: "你是包浩斯風（Bauhaus）小屋的主人",
                analysis: "你的小屋充滿了工業風的冷靜與極簡風的純粹。這裡沒有多餘的裝飾，每一個物件都像是精密設計過的零件。這是一個極度理性與高效的空間，讓你能夠專注於你的創造與思考。",
                personality: "你是一個充滿邏輯與秩序的發明家，思維清晰，追求效率。你善於分析與規劃，並從極簡中尋找靈感，將每一個想法都付諸實踐。"
            },
            C_B: {
                title: "你是靜奢風（Glam）小屋的主人",
                analysis: "你的小屋充滿了奢華、閃耀與精緻的氣息。以絲絨、金屬光澤和亮面材質為核心，創造出一個充滿戲劇性與高雅氛圍的空間。這是一個讓你感到備受寵愛、自信十足的個人舞台。",
                personality: "你是一個注重生活品質、追求精緻美學的品味家。你享受用細節來提升生活的儀式感，並樂於展現自己的獨特魅力，你的生活就像一場永不止息的盛宴。"
            },
            B_C_D_alt: {
                title: "你是經典美式風（American Style）小屋的主人",
                analysis: "你的小屋充滿了舒適、隨性和溫暖的氛圍，注重實用性與家的感覺。這裡有著寬敞舒適的沙發、溫暖的木質地板和經典的線條，是一個能夠讓你完全放鬆，充滿生活氣息的空間。",
                personality: "你是一個熱愛生活、注重實用與舒適的實踐家。你喜歡營造溫馨的氛圍，善於將傳統與現代元素巧妙融合，創造出一個充滿回憶與溫暖的家。"
            }
        };

        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                if (page.id === pageId) {
                    page.classList.add('active');
                } else {
                    page.classList.remove('active');
                }
            });
        }

        function updateProgressBar() {
            const progress = (currentQuestionIndex / questions.length) * 100;
            progressBar.style.width = progress + '%';
        }

        function startQuiz() {
            startPage.classList.add('fading-out');
            setTimeout(() => {
                startPage.classList.remove('active', 'fading-out');
                showPage('question-page');
                loadQuestion();
            }, 800);
        }

        function loadQuestion() {
            if (currentQuestionIndex < questions.length) {
                const question = questions[currentQuestionIndex];
                storyNarrative.textContent = question.narrative;
                questionText.textContent = question.text;
                optionsContainer.innerHTML = '';
                for (const [key, value] of Object.entries(question.options)) {
                    const button = document.createElement('button');
                    button.textContent = `${key}. ${value}`;
                    button.classList.add('option-btn');
                    button.onclick = () => handleAnswer(key);
                    optionsContainer.appendChild(button);
                }
                updateProgressBar();
                prevBtn.disabled = currentQuestionIndex === 0;
            } else {
                showResult();
            }
        }

        function handleAnswer(answer) {
            userAnswers.push(answer);
            const currentQuestionPage = document.getElementById('question-page');
            currentQuestionPage.classList.add('fading-out');
            setTimeout(() => {
                currentQuestionPage.classList.remove('fading-out');
                currentQuestionIndex++;
                loadQuestion();
            }, 800);
        }

        function goBack() {
            if (currentQuestionIndex > 0) {
                userAnswers.pop();
                currentQuestionIndex--;
                const currentQuestionPage = document.getElementById('question-page');
                currentQuestionPage.classList.add('fading-out');
                setTimeout(() => {
                    currentQuestionPage.classList.remove('fading-out');
                    loadQuestion();
                }, 800);
            }
        }

        function showResult() {
            const resultKey = determineResult();
            const resultData = results[resultKey] || results.A; // Fallback to A if key not found
            
            resultTitle.innerHTML = resultData.title;
            resultAnalysis.innerHTML = resultData.analysis;
            personalityAnalysis.innerHTML = resultData.personality;

            showPage('result-page');
        }
        
        function showPromotionPage() {
            resultPage.classList.add('fading-out');
            setTimeout(() => {
                resultPage.classList.remove('active', 'fading-out');
                showPage('promotion-page');
            }, 800);
        }

        function determineResult() {
            const counts = {};
            userAnswers.forEach(answer => {
                counts[answer] = (counts[answer] || 0) + 1;
            });

            const sortedCounts = Object.entries(counts).sort(([, a], [, b]) => b - a);
            const mainOption = sortedCounts[0] ? sortedCounts[0][0] : null;
            const secondOption = sortedCounts[1] ? sortedCounts[1][0] : null;

            if (mainOption === 'A' && secondOption === 'C') return 'A_C';
            if (mainOption === 'A' && secondOption === 'D') return 'D_A';
            if (mainOption === 'D' && secondOption === 'A') return 'D_A';
            if (mainOption === 'C' && secondOption === 'A') return 'A_C'; // Reroute to same result for consistency
            if (mainOption === 'B' && secondOption === 'A') return 'B'; // No specific B_A result, fallback to main B
            if (mainOption === 'D' && secondOption === 'B') return 'D'; // No specific D_B result, fallback to main D
            if (mainOption === 'C' && secondOption === 'B') return 'C_B';
            if (mainOption === 'D' && secondOption === 'C') return 'D_C';
            if (mainOption === 'B' && secondOption === 'D') return 'B_C_D_alt';

            return mainOption || 'A';
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            showPage('start-page');
        }
    </script>
</body>
</html>